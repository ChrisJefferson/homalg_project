- make the generation of the methods for functors automatic

- ask Max:
  . when does a "returned" function remember its context? Always?
  . display issues ($COLUMNS) of external CAS
  . searching for an alternative path fails
  . saving objects
  . test examples?
  . GAPDoc

- when do immediate methods apply? immediately after objectifying?
##
InstallImmediateMethod( ElementaryDivisorsOfLeftModule,
        IsFinitelyPresentedModuleRep and IsZeroModule and HasLeftActingDomain, 0, ## FIXME: remove HasLeftActingDomain
        
  function( M )
    local R;
    
    R := HomalgRing( M );
    
    if HasIsLeftPrincipalIdealRing( R ) and IsLeftPrincipalIdealRing( R ) then
        return [ ];
    fi;
    
    TryNextMethod( );
    
end );

##
InstallImmediateMethod( ElementaryDivisorsOfLeftModule,
        IsFinitelyPresentedModuleRep and IsFreeModule and HasLeftActingDomain, 0, ## FIXME: remove HasLeftActingDomain
        
  function( M )
    local R;
    
    R := HomalgRing( M );
    
    if HasIsLeftPrincipalIdealRing( R ) and IsLeftPrincipalIdealRing( R ) then
        return ListWithIdenticalEntries( NrGenerators( M ), Zero( R ) );
    fi;
    
    TryNextMethod( );
    
end );

